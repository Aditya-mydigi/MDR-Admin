generator client {
  provider = "prisma-client-js"
  output   = "./generated/india"
}

datasource india {
  provider = "postgresql"
  url      = env("DATABASE_URL_INDIA")
}

model users {
  id                                            String            @id @india.Uuid
  first_name                                    String?
  middle_name                                   String?
  last_name                                     String?
  password                                      String?
  email                                         String            @unique(map: "email_unique")
  phone_num                                     String?           @india.VarChar(15)
  dob                                           DateTime?         @india.Timestamp(6)
  image_url                                     String?
  google_id                                     String?           @unique(map: "unique_google_id")
  created_at                                    DateTime?         @default(now()) @india.Timestamp(6)
  email_verified                                Boolean?          @default(false)
  blood_group                                   String?
  city                                          String?
  state                                         String?
  country                                       String?
  zip_code                                      String?           @india.VarChar(10)
  emergency_contact                             String?
  emergency_contact_name                        String?
  relationship                                  String?
  updated_at                                    DateTime?         @default(now()) @india.Timestamp(6)
  referral_by                                   String?
  referral_code                                 String?
  referral_count                                Int?              @default(0)
  mdr_id                                        String?           @unique(map: "unique_mdr_id")
  apple_id                                      String?           @unique(map: "unique_apple_id")
  address                                       String?
  gender                                        gender_type
  login_type                                    String?
  credit                                        Decimal?          @default(0) @india.Decimal
  user_plan_active                              Boolean?          @default(false)
  plan_id                                       String?
  payment_date                                  DateTime?         @india.Timestamp(6)
  expiry_date                                   DateTime?         @india.Timestamp(6)
  coupon_code                                   String?
  order_id                                      String?           @unique
  immunizations                                 String[]
  favshealthhub                                 favshealthhub[]
  payment_records                               payment_records[]
  referrals_referrals_referred_byTousers        referrals[]       @relation("referrals_referred_byTousers")
  referrals_referrals_referred_by_mdr_idTousers referrals[]       @relation("referrals_referred_by_mdr_idTousers")
  referrals_referrals_user_idTousers            referrals[]       @relation("referrals_user_idTousers")
  referrals_referrals_user_mdr_idTousers        referrals[]       @relation("referrals_user_mdr_idTousers")
  user_coupon_log_user_coupon_log_mdr_idTousers user_coupon_log[] @relation("user_coupon_log_mdr_idTousers")
  user_coupon_log_user_coupon_log_useridTousers user_coupon_log[] @relation("user_coupon_log_useridTousers")
}

model allergies_data {
  id                         Int      @id @default(autoincrement())
  user_id                    String   @india.Uuid
  allergy                    String
  allergen                   String?
  scientific_name            String?
  occurrence_in_diet_contact String?
  allergy_information        String?
  signs_and_symptoms         String?
  related_foods              String?
  diagnosis                  String?
  suggestion                 String?
  avoidance                  String?
  risks                      String?
  category                   String?
  allergy_id                 String?  @india.Uuid
  created_at                 DateTime @default(now()) @india.Timestamptz(6)
  updated_at                 DateTime @default(now()) @india.Timestamptz(6)
  mdr_id                     String?
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model coupons {
  id          String    @id @default(dbgenerated("gen_random_uuid()")) @india.Uuid
  coupon_code String    @unique @india.VarChar(50)
  type        String    @india.VarChar(20)
  amount      Decimal   @india.Decimal(10, 2)
  start_date  DateTime? @india.Timestamptz(6)
  end_date    DateTime? @india.Timestamptz(6)
  usage_limit Int?
  used_count  Int?      @default(0)
  is_active   Boolean?  @default(true)
  created_at  DateTime? @default(now()) @india.Timestamptz(6)
  updated_at  DateTime? @default(now()) @india.Timestamptz(6)
}

model favshealthhub {
  id         String    @id @default(dbgenerated("gen_random_uuid()")) @india.Uuid
  user_id    String    @india.Uuid
  mdr_id     String?
  favs       Json
  created_at DateTime? @default(now()) @india.Timestamp(6)
  updated_at DateTime? @default(now()) @india.Timestamp(6)
  users      users     @relation(fields: [user_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@index([favs], map: "idx_user_favs_gin", type: Gin)
}

model health_hub {
  id             Int       @id @default(autoincrement())
  user_id        String    @unique(map: "unique_health_hub_user") @india.Uuid
  favs           String[]  @default([])
  interests      String[]  @default([])
  recent_browsed String[]  @default([])
  created_at     DateTime? @default(now()) @india.Timestamptz(6)
  updated_at     DateTime? @default(now()) @india.Timestamptz(6)
  mdr_id         String?
}

model mdr_id_sequence {
  year_month String @id
  seq        Int
}

model mental_ai {
  id      Int      @default(autoincrement())
  mdr_id  String
  session Boolean?

  @@id([id, mdr_id], map: "PK_mental_ai")
}

model payment_records {
  id                String    @id @default(dbgenerated("gen_random_uuid()")) @india.Uuid
  orderid           String    @unique
  clientid          String
  plan_id           String?
  credit            Int
  amount            Decimal   @india.Decimal
  discount_amount   Decimal?  @default(0) @india.Decimal
  final_amount      Decimal   @india.Decimal
  payment_status    String
  only_for_credit   Boolean
  validity          String?
  validity_in_days  Int?
  coupon_id         String?
  datetime          DateTime  @default(now()) @india.Timestamp(6)
  response          String?
  response_datetime DateTime? @india.Timestamp(6)
  mdr_id            String?
  users             users?    @relation(fields: [mdr_id], references: [mdr_id], map: "fk_payment_records_mdr_id")
  plans             plans?    @relation(fields: [plan_id], references: [plan_id], onDelete: NoAction, onUpdate: NoAction)
}

model plans {
  plan_id           String            @id
  amount            Decimal           @india.Decimal
  validity          String?
  validity_in_days  Int
  visibility        Boolean           @default(true)
  description_line1 String?
  description_line2 String?
  credit            Int?
  payment_records   payment_records[]
}

model referrals {
  id                                        String    @id @default(dbgenerated("gen_random_uuid()")) @india.Uuid
  user_id                                   String    @india.Uuid
  user_mdr_id                               String    @india.VarChar(250)
  referred_by                               String    @india.Uuid
  referred_by_mdr_id                        String    @india.VarChar(250)
  referral_code                             String
  referral_date                             DateTime? @default(now()) @india.Timestamp(6)
  users_referrals_referred_byTousers        users     @relation("referrals_referred_byTousers", fields: [referred_by], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_referred_by")
  users_referrals_referred_by_mdr_idTousers users     @relation("referrals_referred_by_mdr_idTousers", fields: [referred_by_mdr_id], references: [mdr_id], onDelete: NoAction, onUpdate: NoAction, map: "fk_referred_by_mdr_id")
  users_referrals_user_idTousers            users     @relation("referrals_user_idTousers", fields: [user_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_user_id")
  users_referrals_user_mdr_idTousers        users     @relation("referrals_user_mdr_idTousers", fields: [user_mdr_id], references: [mdr_id], onDelete: NoAction, onUpdate: NoAction, map: "fk_user_mdr_id")
}

model rewards {
  id        Int       @id(map: "PK_rewards") @default(autoincrement())
  name      String?   @india.VarChar(250)
  type      String?   @india.VarChar(250)
  amount    Int?
  user_id   String?   @india.Uuid
  statement String?
  status    Boolean?
  date      DateTime? @india.Timestamp(6)
}

model user_coupon_log {
  id                                  String    @id @default(dbgenerated("gen_random_uuid()")) @india.Uuid
  userid                              String    @india.Uuid
  coupon_code                         String
  timestamp                           DateTime? @default(now()) @india.Timestamp(6)
  mdr_id                              String?
  users_user_coupon_log_mdr_idTousers users?    @relation("user_coupon_log_mdr_idTousers", fields: [mdr_id], references: [mdr_id], map: "fk_user_coupon_log_mdr_id")
  users_user_coupon_log_useridTousers users     @relation("user_coupon_log_useridTousers", fields: [userid], references: [id], onDelete: NoAction, onUpdate: NoAction)
}

enum gender_type {
  Male
  Female
  Other
  male
  female
  other
}
